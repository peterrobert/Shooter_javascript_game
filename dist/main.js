!function(e){var t={};function a(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(o,n,function(t){return e[t]}.bind(null,n));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";a.r(t),a.d(t,"theValues",(function(){return i}));class o{constructor(e,t){this.name=e,this.score=t}save(){const e={user:this.name,score:this.score};fetch("https://us-central1-js-capstone-backend.cloudfunctions.net/api/games/tHxVDyAAsZqSgm0dnTap/scores",{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(e=>e.json()).then(e=>console.log(e))}leaderBoard(){fetch("https://us-central1-js-capstone-backend.cloudfunctions.net/api/games/tHxVDyAAsZqSgm0dnTap/scores",{method:"GET",body:JSON.stringify(),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(e=>e.json()).then(e=>i(e))}}function n(e){const t=e;return function(){const e=new Phaser.Game(800,600,Phaser.AUTO,"my-game",{preload:function(){e.load.spritesheet("ship","assets/images/spaceship.png",64,64),e.load.audio("engine","assets/sounds/engine.mp3"),e.load.image("space","assets/images/space-stars.jpg"),e.load.image("bullet","assets/images/laser.png"),e.load.image("particle","assets/images/asteroid-particle.png"),e.load.image("red-bar","assets/images/health-red.png"),e.load.image("green-bar","assets/images/health-green.png"),e.load.image("lives","assets/images/ship-lives.png"),e.load.image("title","assets/images/asteroids-2084-title.png"),e.load.audio("boom","assets/sounds/boom.wav"),e.load.audio("fire","assets/sounds/fire.wav"),e.load.audio("teleport","assets/sounds/teleport.mp3"),e.load.audio("life","assets/sounds/extra-life.wav"),e.load.spritesheet("asteroid","assets/images/asteroid.png ",40,40),e.load.spritesheet("explosion","assets/images/explosion.png",128,128)},create:function(){s=e.add.audio("engine",.3),s.loop=!0,s.play(),r=e.add.audio("boom",.3),x=e.add.audio("teleport",.5),v=e.add.audio("life",.5),e.physics.startSystem(Phaser.Physics.ARCADE),l=e.add.tileSprite(0,0,800,600,"space"),p=e.add.weapon(10,"bullet"),p.bulletKillType=Phaser.Weapon.KILL_CAMERA_BOUNDS,p.bulletSpeed=600,p.fireRate=250,p.setBulletBodyOffset(24,12,6,6),a=e.add.sprite(400,300,"ship"),a.anchor.set(.5,.5),a.angle=-90,a.health=100,a.maxHealth=100,a.animations.add("moving",[0,1,2],10,!0),a.exists=!1,a.events.onKilled.add((function(){if(c.reset(a.x,a.y),c.animations.play("explode",30,!1,!0),M-=1,g=new Phaser.Rectangle(0,0,25*M,25),b.crop(g),M>0)a.x=e.world.centerX,a.y=e.world.centerY,a.angle=-90,a.body.velocity.set(0),a.body.acceleration.set(0),a.revive(a.maxHealth),a.alpha=0,e.add.tween(a).to({alpha:1},2e3,Phaser.Easing.Cubic.Out,!0);else{E.visible=!0,E.scale.setTo(3,3),A.visible=!0,i.onDown.addOnce(D,this);new o(t,T).save()}x.play()})),p.trackSprite(a,0,0,!0),u=e.add.audio("fire",.1),p.onFire.add(()=>{u.play()}),d=e.add.group(),d.enableBody=!0;for(let t=0;t<10;t++){const t=d.create(e.world.randomX,e.world.randomY,"asteroid");t.anchor.set(.5,.5),t.body.setCircle(15,5,5),t.animations.add("spin-clock",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],16,!0),t.animations.add("spin-counter",[15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0],16,!0),Math.random()<.5?t.animations.play("spin-clock"):t.animations.play("spin-counter"),t.body.velocity.x=Math.random()*B,Math.random()<.5&&(t.body.velocity.x*=-1),t.body.velocity.y=Math.random()*B,Math.random()<.5&&(t.body.velocity.y*=-1)}f=e.add.emitter(0,0,50),f.makeParticles("particle"),f.gravity=0,f.setAlpha(1,0,1e3),c=e.add.sprite(100,100,"explosion"),c.visible=!1,c.animations.add("explode",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],30,!1),e.physics.arcade.enable(a),a.body.setCircle(20,12,12),a.body.maxVelocity.set(400),a.body.drag.set(20),a.body.collideWorldBounds=!0,n=e.input.keyboard.createCursorKeys(),i=e.input.keyboard.addKey(Phaser.KeyCode.SPACEBAR),i.onDown.addOnce(R,this),O=e.add.text(20,20,"Score: "+T,{font:"Arial",fontSize:"20px",fontStyle:"bold",fill:"#ffffff"}),m=e.add.text(210,20,"Shields",{font:"Arial",fontSize:"20px",fontStyle:"bold",fill:"#ffffff"}),y=e.add.text(590,20,"Ships",{font:"Arial",fontSize:"20px",fontStyle:"bold",fill:"#ffffff"}),e.add.image(300,20,"red-bar"),h=e.add.image(300,20,"green-bar"),b=e.add.image(655,20,"lives"),g=new Phaser.Rectangle(0,0,25*M,25),b.crop(g),w=e.add.image(400,200,"title"),w.anchor.set(.5,.5),S=e.add.text(400,300,"THE GREAT WAR OF MARS  KINDLY PRESS SPACE TO BEGIN",{font:"Arial",fontSize:"25px",fontStyle:"bold",fill:"#00ff00",text:"center"}),S.anchor.set(.5,.5),P=e.add.text(400,350,"created by peter robert",{font:"Arial",fontSize:"20px",fontStyle:"bold",fill:"#00ff00"}),P.anchor.set(.5,.5),E=e.add.text(400,300,"GAME OVER",{font:"Arial",fontSize:"40px",fontStyle:"bold",fill:"#ff0000",text:"center"}),E.anchor.set(.5,.5),E.visible=!1,A=e.add.text(400,400,"press W to show the leader board or space to restart",{font:"Arial",fontSize:"25px",fontStyle:"bold",fill:"#00ff00",text:"center"}),A.anchor.set(.5,.5),A.visible=!1},update:function(){a.animations.play("moving"),a.animations.stop(),a.frame=1,e.physics.arcade.collide(a,d,j,null,this),e.physics.arcade.collide(p.bullets,d,k),n.left.isDown?a.body.angularVelocity=-200:n.right.isDown?a.body.angularVelocity=200:a.body.angularVelocity=0;n.up.isDown&&a.exists?(e.physics.arcade.accelerationFromRotation(a.rotation,200,a.body.acceleration),s.volume=1):(a.body.acceleration.set(0),s.volume=.3);i.isDown&&a.exists&&p.fire();a.left<=50?a.left=50:a.right>=e.world.width-50&&(a.right=e.world.width-50);a.top<=50?a.top=50:a.bottom>=e.world.height-50&&(a.bottom=e.world.height-50);if(l.tilePosition.x=l.tilePosition.x-a.body.velocity.x/40,l.tilePosition.y=l.tilePosition.y-a.body.velocity.y/40,d.forEach(t=>{e.world.wrap(t,20)}),Math.random()<.02){const t=d.getFirstDead();t&&(t.revive(),t.body.velocity.x=Math.random()*B,Math.random()<.5&&(t.body.velocity.x*=-1),t.body.velocity.y=Math.random()*B,Math.random()<.5&&(t.body.velocity.y*=-1),t.alpha=0,e.add.tween(t).to({alpha:1},500,Phaser.Easing.Cubic.Out,!0))}}});let a,n,i,s,l,d,r,c,p,u,f,m,h,y,b,g,x,v,w,S,P,E,A,O,M=3,T=0,C=1e4,B=100;function j(t,a){f.x=a.x,f.y=a.y,f.explode(1e3,5),a.kill(),t.damage(25),h.scale.setTo(t.health/t.maxHealth,1),r.play(),e.camera.shake(.02,250)}function k(t,o){o.kill(),t.kill(),r.play(),T+=250,T>=C&&(M<5?(M+=1,g=new Phaser.Rectangle(0,0,25*M,25),b.crop(g),v.play(),e.camera.flash(65280,500)):a.health<a.maxHealth&&(a.health=a.maxHealth,h.scale.setTo(a.health/a.maxHealth,1),v.plays()),C+=1e4),O.text="score: "+T,B+=1}function R(){e.add.tween(S).to({alpha:0},250,Phaser.Easing.Cubic.Out,!0),e.add.tween(P).to({alpha:0},250,Phaser.Easing.Cubic.Out,!0),e.add.tween(w).to({alpha:0},3e3,Phaser.Easing.Cubic.Out,!0,250),e.add.tween(w.scale).to({x:3,y:3},3e3,Phaser.Easing.Cubic.Out,!0,250),x.play(),a.exists=!0}function D(){T=0,M=3,C=1e4,B=100,e.state.restart()}}()}function i(e){try{const t=e.result,a=document.createElement("ul");for(let e=0;e<t.length;e++){const o=document.createElement("li");o.innerText=`name: ${t[e].user}      score: ${t[e].score}`,a.appendChild(o)}elementsContainer.append(a)}catch(e){console.log(e)}}window.onload=()=>{let e,t=document.getElementById("my-game");t.innerHTML='<form id = "nameForm">\n  <label for="fname">Please Enter Your name:</label>\n  <input type="text" id="fname" name="fname" required><br><br>\n  <input type="submit" value="Submit" id="sub-btn"">\n</form>\n';document.getElementById("nameForm").addEventListener("submit",()=>{e=document.getElementById("fname").value,t.innerHTML="",n(e)});document.getElementById("leader_board").innerHTML='<button id="btnb">Leaders Board</button>\n<div id="leader_show">\n\n\n</div>';const a=document.getElementById("btnb");document.getElementById("leader_show");a.addEventListener("click",()=>{(new o).leaderBoard(),a.disabled="disabled"})}}]);